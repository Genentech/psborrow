[{"path":"/articles/user_guide.html","id":"install-the-package","dir":"Articles","previous_headings":"","what":"Install the package","title":"User Guide: Dynamic Borrowing with psborrow","text":"","code":"library(psborrow)"},{"path":"/articles/user_guide.html","id":"simulate-covariates","dir":"Articles","previous_headings":"","what":"Simulate covariates","title":"User Guide: Dynamic Borrowing with psborrow","text":"start making sample size internal control, internal treatment, external control arms 200, 180 400 respectively. call function set_cov() create two binary covariates \\(x_1\\), \\(x_2\\), one continuous covariate \\(x_3\\) following multivariate normal distribution covariance pair variables specified cov order \\(Cov(x_1, x_2)\\), \\(Cov(x_1, x_3)\\), \\(Cov(x_2, x_3)\\). \\[\\begin{aligned} \\begin{bmatrix} x_1\\\\x_2\\\\x_3\\\\ \\end{bmatrix} &\\sim N \\left( \\begin{bmatrix} 0\\\\ 0.5\\\\0.5 \\end{bmatrix}, \\begin{bmatrix} 1 & 0.5 & 0.7\\\\ 0.5 & 1.2 & 0.9\\\\ 0.7 & 0.9 & 1\\\\ \\end{bmatrix} \\right) \\end{aligned}\\] \\(x_1\\) \\(x_2\\) converted binary variables \\(x_1\\) \\(x_2\\) using quantiles normal distribution calculated probability specified prob_int internal trial prob_ext external trial: \\[ \\begin{aligned}   \\text{internal: Pr} (X_1 = 1) &= 0.45 \\\\   \\text{Pr}(X_2 = 1) &= 0.55\\\\   \\text{external: Pr} (X_1 = 1) &= 0.65\\\\   P(X_2 = 1) &= 0.55\\\\ \\end{aligned} \\] package enables user add covariates batch. covset2 includes information two continuous covariates three binary covariates. set mu_int = 0 mean five variables cluster 0 internal trial. rule applies parameter mu_ext, var, cov, prob_int prob_ext. combine covset1 covset2, call function simu_cov() simulate covariates add treatment variables saved ss. step, also set true hazard ratio HR internal treatment control arm, hazard ratio driftHR external control internal control arms. User can provide list different HR driftHR values test range different hazard ratios three arms. number simulations nsim seed parameters seed included statement produce reproducible results. sample_cov list 8 matrices. Example one simulated dataset (matrix) covariates treatment arm information output sample_cov:","code":"ss = set_n(ssC = 200, ssE = 180, ssExt = 400) covset1 <- set_cov(   n_cat = 2,   n_cont = 1,   mu_int = c(0, 0.5, 0.5),   mu_ext = c(0.7, 0.5, 0.9),   var = c(1, 1.2, 1),   cov = c(0.5, 0.7, 0.9),   prob_int = c(0.45, 0.55),   prob_ext = c(0.65, 0.55) ) covset2 <- set_cov(   n_cat = 2,   n_cont = 3,   mu_int = 0,   mu_ext = 0.2,   var = 0.7,   cov = 0.7,   prob_int = 0.5 ) cov_list <- c(covset1, covset2)  sample_cov <- simu_cov(   ssObj = ss,    covObj = cov_list,   HR = c(0.67, 1),   driftHR = c(1, 1.2),   nsim = 10,   seed = 47 ) head(sample_cov[[1]], 5) #>      driftHR   HR ext trt cov1 cov2         cov3 cov4 cov5        cov6 #> [1,]       1 0.67   1   0    0    0  1.426442353    1    1  0.06551554 #> [2,]       1 0.67   1   0    1    1  0.413408109    1    1 -0.86978706 #> [3,]       1 0.67   1   0    1    1 -0.667792987    1    1 -0.52705948 #> [4,]       1 0.67   1   0    0    1 -0.008703362    1    1 -0.66796308 #> [5,]       1 0.67   1   0    1    1 -0.941826735    0    0  0.90304808 #>             cov7        cov8 #> [1,]  0.06551554  0.06551554 #> [2,] -0.86978706 -0.86978706 #> [3,] -0.52705948 -0.52705948 #> [4,] -0.66796308 -0.66796308 #> [5,]  0.90304808  0.90304808"},{"path":[]},{"path":"/articles/user_guide.html","id":"time-to-event","dir":"Articles","previous_headings":"Survival","what":"Time-to-event","title":"User Guide: Dynamic Borrowing with psborrow","text":"second part involves generating time--events either piece-wise exponential distribution weibull distribution. example , assume survival time follows piece-wise exponential distirbution baseline hazard rate constant months 1-2, month 3 onward. baseline hazard rate (lambdaC) patients covariate equaling 0 internal control arm time periods 0.0135 0.2, respectively. baseline hazard rate internal treatment external control arm product lambdaC HR, driftHR, respectively. calculation details draw event time patient following exponential distribution. patient, calculate specific \\(\\lambda\\) value based trial treatment indicator, along covariate values patient. \\[ \\begin{aligned} f(t) &= v\\lambda t^{v-1} e^{-\\lambda t^v} \\\\ F(t) &= 1 - e^{-\\lambda t^v} \\\\ \\lambda(t) &= \\lambda v t ^{v-1} \\\\ \\\\ v &\\text{: shape parameter (user-specified)}\\\\ \\lambda &\\text{: rate parameter}\\\\ \\lambda_c &\\text{: baseline hazard rate time 0 internal control patient covariates } X = 0 \\\\ \\\\ \\text{Alternative parameterizations}\\\\ f(t) &= \\frac{v}{k} \\left( \\frac{t}{k} \\right) ^{v-1} e^{-\\frac{t}{k}^v} \\\\ &= v \\left( \\frac{1}{k} \\right) ^{v} t^{v-1} e^{- \\left(\\frac{t}{k} \\right) ^v} \\\\ \\lambda &= \\left( \\frac{1}{k} \\right) ^ v\\\\ \\lambda(t) &= \\lambda v t ^{v-1} \\\\ log(k) &= - \\frac{1}{v} log(\\lambda) \\\\ k &\\text{: scale parameter (input rweibull R, one k patient)}\\\\ \\\\ \\text{Internal control}\\\\ \\lambda &= \\lambda_c \\times e^{X \\beta}\\\\ \\lambda(t) &= \\lambda_c \\times e^{X \\beta} \\times v t ^{v-1} \\\\ log(k) &= - \\frac{1}{v} \\Bigl[ log (\\lambda_c) + X \\beta \\Bigr] \\\\ \\\\ \\text{Internal treatment}\\\\ \\lambda &= \\lambda_c \\times \\text{HR} \\times e^{X \\beta} \\\\ \\lambda(t) & = \\lambda_c \\times \\text{HR} \\times e^{X \\beta} \\times v t ^{v-1}\\\\ log(k) &= - \\frac{1}{v} \\Bigl[ log(\\lambda_c) + log(\\text{HR}) + e^{X \\beta} \\Bigr] \\\\ \\\\ \\text{External control} \\\\ \\lambda &= \\lambda_c \\times \\text{driftHR} \\times e^{X \\beta} \\\\ \\lambda(t) &= \\lambda_c \\times \\text{driftHR} \\times e^{X \\beta} \\times v t ^{v-1} \\\\ log(k) &= - \\frac{1}{v} \\Bigl[ log(\\lambda_c) + log(\\text{driftHR}) + e^{X \\beta} \\Bigr] \\\\ \\end{aligned} \\] Since covariate data generate sample_match contains 8 covariates, also want make sure length beta 8. Additionally, users can choose expand covariates calculating hazard rate. example , hazard rate patient internal control calculated . internal treatment external control arms. \\[ \\begin{aligned} \\lambda_i = \\lambda_C \\times e^{0.2 \\times x_3 + 0.3 \\times (x_1 \\times x_3) + 0.5 \\times (x_2 + x_3) + 2 \\times x_1^3} \\end{aligned} \\] Time--events can also follow weibull distribution. setting, expected enter shape weibull distribution 0.9 case. let beta = 0.5 coefficients covariates. Users can use ?set_event see options. Weibull distribution, goal find hazard rate \\(\\lambda(t)\\) patient covariates \\(X\\). \\[ \\begin{aligned} f(t) &= \\lambda e^{-\\lambda t} \\\\ F(t) &= 1 - e^{-\\lambda t} \\\\ \\lambda(t) &= \\lambda \\\\ \\\\ \\lambda_c &\\text{: baseline constant hazard rate internal control patient covariates } X = 0 \\\\ \\text{HR} &\\text{: hazard ratio internal treatment vs control arm (proportional hazards)} \\\\ \\text{driftHR} &\\text{: hazard ratio external vs internal control arm (proportional hazards)} \\\\ \\text{}(\\text{trt}) &\\text{: treatment arm indicator} \\\\ \\text{Internal control}\\\\ \\lambda &= \\lambda_c \\times e^{log(\\text{HR}) \\times \\text{}(\\text{trt}) + X \\beta} \\\\ & = \\lambda_c \\times e^0 \\times e^{X_{} \\beta} \\\\ & = \\lambda_c \\times e^{X \\beta} \\\\ \\text{Internal treatment}\\\\ \\lambda &= \\lambda_c \\times e^{log(\\text{HR}) \\times \\text{}(\\text{trt}) + X \\beta} \\\\ & = \\lambda_c \\times e^{log(\\text{HR}) + X \\beta} \\\\ & = \\lambda_c \\times \\text{HR} \\times e^{X \\beta} \\\\ \\text{External control} \\\\ \\lambda &= \\lambda_c \\times \\text{driftHR} \\times e^{X \\beta} \\\\ \\text{Reparameterization rweibull} \\\\ f(t) &= \\lambda e^{-\\lambda t} \\\\ F(t) &= 1 - e^{-\\lambda t} \\\\ \\lambda(t) &= \\lambda \\end{aligned} \\]","code":"evt <- set_event(   event = \"pwexp\",   lambdaC = c(0.0135, 0.02),   t_itv = 2,   beta = c(     rep(0.2, 3),     0.3,     rep(0.5, 2),     rep(2, 2)   ) ) set_event(   event = \"pwexp\",   lambdaC = c(0.0135, 0.02),   t_itv = 2,   beta = c(0.2, 0.3, 0.5, 2),   change = list(     c(\"cov1\", \"*\", \"cov3\"),     c(\"cov2\", \"+\", \"cov3\"),     c(\"cov1\", \"^\", \"3\")   ),   keep = \"cov3\" ) set_event(event = \"weibull\", shape = 0.9, lambdaC = 0.0135, beta = 0.5)"},{"path":"/articles/user_guide.html","id":"enrollment-pattern-drop-out-analysis-start-time","dir":"Articles","previous_headings":"Survival","what":"Enrollment pattern, drop-out, analysis start time","title":"User Guide: Dynamic Borrowing with psborrow","text":"Next, specify parameters enrollment time, drop-pattern analysis start time. enrollment time time--exit follow piece-wise exponential distribution. parameters set separately internal external trials. internal trial, recruit 2 patients per month first 5 months, 3 patients month 6 month 1, 16 patients per month month 10. assume dropouts rate etaC = 1 per month control arm first 2 month rate increases 1.2 afterwards. analysis set start 45 months study begins (enrollment first patient) warning message show patient enrolled cut-date excluded future analysis. external trial, recruitment rate gamma drop-rate etaC assumed constant. can skip etaE since external trial contains data control arm . Note case, need specify e_itv d_itv. cut-date CCOD = \"event\" means analysis starts 150 events observed. information provided , simulate enrollment pattern, time--events time--dropout using function simu_time(). User can also provide seed value . Example one simulated dataset time--events information output sample_time:","code":"c_int <- set_clin(   gamma = c(2, 3, 16),   e_itv = c(5, 10),   CCOD = \"fixed-first\",   CCOD_t = 45,   etaC = c(0.02, 0.03),   etaE = c(0.2, 0.3),   d_itv = 2 ) c_ext = set_clin(gamma = 10, CCOD = \"event\", CCOD_t = 150, etaC = 0.05) sample_time <- simu_time(dt = sample_cov, eventObj = evt, clinInt = c_int, clinExt = c_ext, seed = 47) head(sample_time[[1]], 5) #>      driftHR   HR ext trt cov1 cov2        cov3 cov4 cov5       cov6       cov7 #> [1,]       1 0.67   0   1    0    0  1.69867515    0    0  1.4069318  1.4069318 #> [2,]       1 0.67   0   1    1    1 -0.42546841    1    1 -0.3578853 -0.3578853 #> [3,]       1 0.67   0   1    1    1 -0.04927021    0    0  0.1370222  0.1370222 #> [4,]       1 0.67   0   1    1    1 -0.42705058    0    0  0.3709728  0.3709728 #> [5,]       1 0.67   0   1    0    1 -0.10903808    0    0  0.2500303  0.2500303 #>            cov8      time cnsr #> [1,]  1.4069318 0.1019925    0 #> [2,] -0.3578853 6.4700163    1 #> [3,]  0.1370222 3.5066896    1 #> [4,]  0.3709728 1.5454039    1 #> [5,]  0.2500303 6.8677445    0"},{"path":"/articles/user_guide.html","id":"bayesian-analysis","dir":"Articles","previous_headings":"","what":"Bayesian analysis","title":"User Guide: Dynamic Borrowing with psborrow","text":"last part, want generate sequence samples posterior distribution parameters interest using JAGS model. call set_prior() use covariates predictors weibull distribution use half-cauchy distribution precision parameter hierarchical dynamic borrowing. Users expected enter initial values following parameters JAGS model: r0: shape weibull distribution time--events alpha: log baseline hazard rate external internal control arms d: precision parameter dataset simulated, can run Bayesian analysis using different predictors priors simultaneously. batch priors testing, choose account covariates model. next example, use propensity score calculated based two covariates cov1 cov2 predictor weibull model. propensity score generated using logistic regression model. present examples set_prior(). Users can use ?set_prior see options. Lastly, combine four priors, run MCMC generate samples posterior distributions. number parallel chains model, number iterations adaptation, number iterations discarded burn-number iterations monitor 2, 100, 100, 200 respectively. User can also provide seed value. User can choose leverage parallel processing calling run_mcmc_p() instead run_mcmc(). folder path path provided, run_mcmc() run_mcmc_p() output save MCMC result summary statistics.","code":"pr1 <- set_prior(pred = \"all\", prior = \"cauchy\", r0 = 1, alpha = c(0, 0), sigma = 0.03) pr2 <- set_prior(pred = \"all\", prior = \"gamma\", r0 = 1,  alpha = c(0, 0)) pr3 <- set_prior(pred = \"all\", prior = \"no_ext\", r0 = 1, alpha = 0) pr4 <- set_prior(pred = \"all\", prior = \"full_ext\", r0 = 1, alpha = 0) set_prior(pred = c(\"ps\", \"cov1\", \"cov2\"), prior = \"gamma\", r0 = 1,  alpha = c(0, 0)) # Use no covariate. External arm will not be included in the Bayesian model set_prior(pred = \"none\", prior = \"no_ext\", r0 = 1, alpha = 0)  # Use propensity score calculated using all covariates as predictor. # Hazard ratio = 1 for external and internal control arms set_prior(pred = \"ps\", prior = \"full_ext\", r0 = 1, alpha = 0)  # Use a subset of covaraites as predictors set_prior(pred = c(\"cov2\", \"cov5\"), prior = \"no_ext\", r0 = 1, alpha = 0) pr_list = c(pr1, pr2, pr3, pr4)  res <- run_mcmc(   dt = sample_time,   pr_list, n.chains = 2,   n.adapt = 10,   n.burn = 10,   n.iter = 20,   seed = 47 )"},{"path":"/articles/user_guide.html","id":"posterior-summary-statistics","dir":"Articles","previous_headings":"","what":"Posterior summary statistics","title":"User Guide: Dynamic Borrowing with psborrow","text":"generate summary statistics one multiple simulation scenarios, can call get_summary(). Example summary statistics output summ: visualize results, users can call plot_hr, plot_type1error plot_power see Bayesian posterior mean hazard ratios treatment control arm, well power, type error implications.","code":"summ <- get_summary(res) head(summ, 5) plot_type1error(summ, driftHR = 1.2, pred = \"all\") plot_power(summ, HR = 0.67, driftHR = 1, pred = \"all\") plot_hr(summ, HR = 0.67, driftHR = 1.2, pred = \"all\") plot_bias(summ, HR = 1, driftHR = 1.2, pred = \"all\") plot_mse(summ, HR = 0.67, driftHR = 1, pred = \"all\")"},{"path":"/articles/user_guide.html","id":"package-options","dir":"Articles","previous_headings":"","what":"Package Options","title":"User Guide: Dynamic Borrowing with psborrow","text":"default psborrow quite chatty informing user explicitly assumptions making. want suppress messages simply specify:","code":"options(\"psborrow.quiet\" = TRUE)"},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Yichen Lu. Author. Aijing Lin. Contributor, maintainer.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Lu Y (2022). psborrow: Bayesian Dynamic Borrowing Propensity Score. R package version 0.1.0.","code":"@Manual{,   title = {psborrow: Bayesian Dynamic Borrowing with Propensity Score},   author = {Yichen Lu},   year = {2022},   note = {R package version 0.1.0}, }"},{"path":"/index.html","id":"psborrow","dir":"","previous_headings":"","what":"Bayesian Dynamic Borrowing with Propensity Score","title":"Bayesian Dynamic Borrowing with Propensity Score","text":"psborrow package aims evaluate effect external borrowing using integrated approach combines propensity score Bayesian dynamic borrowing methods. Users encouraged check vigbette detailed instructions.","code":""},{"path":"/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Bayesian Dynamic Borrowing with Propensity Score","text":"Please first download supporting package rjags: install psborrow package :","code":"# remotes install.packages(\"remotes\") remotes::install_github(\"Genentech/psborrow\")"},{"path":"/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Bayesian Dynamic Borrowing with Propensity Score","text":"can use following tutorials follow package flow User guide","code":""},{"path":"/reference/add_cov.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate covariates with a multivariate normal distribution — add_cov","title":"Simulate covariates with a multivariate normal distribution — add_cov","text":"Simulate covariates multivariate normal distribution","code":""},{"path":"/reference/add_cov.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate covariates with a multivariate normal distribution — add_cov","text":"","code":"add_cov(dt, covObj, seed)"},{"path":"/reference/add_cov.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate covariates with a multivariate normal distribution — add_cov","text":"dt matrix generated set_n covObj object class .covClass generated set_cov seed seed R‘s random number generator. Default first element .Random.seed","code":""},{"path":"/reference/add_cov.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate covariates with a multivariate normal distribution — add_cov","text":"matrix containing simulated covariates information","code":""},{"path":"/reference/add_mcmc.html","id":null,"dir":"Reference","previous_headings":"","what":"Generating posterior samples from MCMC — add_mcmc","title":"Generating posterior samples from MCMC — add_mcmc","text":"Generating posterior samples MCMC","code":""},{"path":"/reference/add_mcmc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generating posterior samples from MCMC — add_mcmc","text":"","code":"add_mcmc(dt, priorObj, n.chains, n.adapt, n.burn, n.iter, seed)"},{"path":"/reference/add_mcmc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generating posterior samples from MCMC — add_mcmc","text":"dt list matrix containing simulated time--events information priorObj object class .priorClass generated set_prior n.chains number parallel chains model n.adapt number iterations adaptation n.burn number iterations discarded burn-n.iter number iterations monitor seed seed random number generator. Default first element .Random.seed","code":""},{"path":"/reference/add_mcmc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generating posterior samples from MCMC — add_mcmc","text":"list containing hazard ratio prior information","code":""},{"path":"/reference/add_time.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate survival times — add_time","title":"Simulate survival times — add_time","text":"Simulate survival times","code":""},{"path":"/reference/add_time.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate survival times — add_time","text":"","code":"add_time(dt, eventObj, clinInt, clinExt, seed)"},{"path":"/reference/add_time.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate survival times — add_time","text":"dt list matrix generated simu_cov containing simulated covariates information eventObj object class .eventClass generated set_event including event information clinInt object class .clinClass generated set_clin including internal trial information clinExt object class .clinClass generated set_clin including external trial information seed seed R‘s random number generator. Default first element .Random.seed","code":""},{"path":"/reference/add_time.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate survival times — add_time","text":"list matrix containing simulated time--events information","code":""},{"path":"/reference/c-.covClass-method.html","id":null,"dir":"Reference","previous_headings":"","what":"Concatenate multiple .covClasss classes — c,.covClass-method","title":"Concatenate multiple .covClasss classes — c,.covClass-method","text":"Concatenate multiple .covClasss classes","code":""},{"path":"/reference/c-.covClass-method.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Concatenate multiple .covClasss classes — c,.covClass-method","text":"","code":"# S4 method for .covClass c(x, ...)"},{"path":"/reference/c-.covClass-method.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Concatenate multiple .covClasss classes — c,.covClass-method","text":"x .covClasss class covariate information generated set_cov ... .covClasss classes covariate information generated set_cov","code":""},{"path":"/reference/c-.covClass-method.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Concatenate multiple .covClasss classes — c,.covClass-method","text":"vector .covClasss classes","code":""},{"path":"/reference/c-.covClass-method.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Concatenate multiple .covClasss classes — c,.covClass-method","text":"","code":"# combine two sets of covariates covset1 = set_cov(n_cat = 2, n_cont = 0, mu_int = 0, mu_ext = 0, var = 1) #> User provides one mean of covariate in internal trials. This value is used for all covariates #> User provides one mean of covariate in external trials. This value is used for all covariates #> User provides one number for variance. This variance is used for all covariates #> Covariance for covariate (cov) is not recognized. Default value 0 is used for all covariates #> Probability of binary covariate in the internal trial is not recognized or correctly specified. Default value 0.5 is used for all binary covariates #> Probability of binary covariate in the external trial is not recognized or correctly specified. mu_int is used. covset2 = set_cov(n_cat = 0, n_cont = 1, mu_int = 62, mu_ext = 65, var = 11) cov_list = c(covset1, covset2)"},{"path":"/reference/c-.priorClass-method.html","id":null,"dir":"Reference","previous_headings":"","what":"Concatenate multiple .priorClasss class — c,.priorClass-method","title":"Concatenate multiple .priorClasss class — c,.priorClass-method","text":"Concatenate multiple .priorClasss class","code":""},{"path":"/reference/c-.priorClass-method.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Concatenate multiple .priorClasss class — c,.priorClass-method","text":"","code":"# S4 method for .priorClass c(x, ...)"},{"path":"/reference/c-.priorClass-method.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Concatenate multiple .priorClasss class — c,.priorClass-method","text":"x .priorClasss class prior distribution information generated set_prior ... .priorClasss class prior distribution information generated set_prior","code":""},{"path":"/reference/c-.priorClass-method.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Concatenate multiple .priorClasss class — c,.priorClass-method","text":"vector .priorClasss classes","code":""},{"path":"/reference/dot-clinClass-class.html","id":null,"dir":"Reference","previous_headings":"","what":"S4 Class for specifying parameters for enrollment time, drop-out pattern and analysis start time — .clinClass-class","title":"S4 Class for specifying parameters for enrollment time, drop-out pattern and analysis start time — .clinClass-class","text":"S4 Class specifying parameters enrollment time, drop-pattern analysis start time","code":""},{"path":"/reference/dot-covClass-class.html","id":null,"dir":"Reference","previous_headings":"","what":"S4 Class for setting up covariates — .covClass-class","title":"S4 Class for setting up covariates — .covClass-class","text":"S4 Class setting covariates","code":""},{"path":"/reference/dot-eventClass-class.html","id":null,"dir":"Reference","previous_headings":"","what":"S4 Class for setting parameters for time-to-events — .eventClass-class","title":"S4 Class for setting parameters for time-to-events — .eventClass-class","text":"S4 Class setting parameters time--events","code":""},{"path":"/reference/dot-priorClass-class.html","id":null,"dir":"Reference","previous_headings":"","what":"S4 Class for specifying prior distributions and predictors for MCMC methods — .priorClass-class","title":"S4 Class for specifying prior distributions and predictors for MCMC methods — .priorClass-class","text":"S4 Class specifying prior distributions predictors MCMC methods","code":""},{"path":"/reference/get_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate summary statistics of a simulation scenario — get_summary","title":"Generate summary statistics of a simulation scenario — get_summary","text":"Generate summary statistics simulation scenario","code":""},{"path":"/reference/get_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate summary statistics of a simulation scenario — get_summary","text":"","code":"get_summary(dt)"},{"path":"/reference/get_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate summary statistics of a simulation scenario — get_summary","text":"dt data.frame containing summary statistics posterior samples simulation","code":""},{"path":"/reference/get_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate summary statistics of a simulation scenario — get_summary","text":"data.frame containing mean sd posterior HR treatment control arm, posterior mean sd HR internal control external control arm, reject rate, variance, bias mse simulation set","code":""},{"path":"/reference/is_psborrow_dev.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if user is in psborrow development environment — is_psborrow_dev","title":"Check if user is in psborrow development environment — is_psborrow_dev","text":"Simple function leverages DESCRIPTION file check user development environment psborrow.","code":""},{"path":"/reference/is_psborrow_dev.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if user is in psborrow development environment — is_psborrow_dev","text":"","code":"is_psborrow_dev()"},{"path":"/reference/is_psborrow_dev.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if user is in psborrow development environment — is_psborrow_dev","text":"TRUE/FALSE flag (TRUE = development environment)","code":""},{"path":"/reference/match_cov.html","id":null,"dir":"Reference","previous_headings":"","what":"Match — match_cov","title":"Match — match_cov","text":"Match","code":""},{"path":"/reference/match_cov.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Match — match_cov","text":"","code":"match_cov(dt, match)"},{"path":"/reference/match_cov.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Match — match_cov","text":"dt list matrix match vector covariates name match ","code":""},{"path":"/reference/match_cov.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Match — match_cov","text":"list matrix containing matched cohort information","code":""},{"path":"/reference/match_cov.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Match — match_cov","text":"","code":"# match internal and external trial data using different covariates smp = set_n(ssC = 140, ssE = 275, ssExt = 100) covset1 = set_cov(n_cat = 2, n_cont = 0, mu_int = 0, mu_ext = 0, var = 1) #> User provides one mean of covariate in internal trials. This value is used for all covariates #> User provides one mean of covariate in external trials. This value is used for all covariates #> User provides one number for variance. This variance is used for all covariates #> Covariance for covariate (cov) is not recognized. Default value 0 is used for all covariates #> Probability of binary covariate in the internal trial is not recognized or correctly specified. Default value 0.5 is used for all binary covariates #> Probability of binary covariate in the external trial is not recognized or correctly specified. mu_int is used. covset2 = set_cov(n_cat = 0, n_cont = 1, mu_int = 62, mu_ext = 65, var = 11) cObj = c(covset1, covset2) sample_cov <-   simu_cov(ssObj = smp, covObj = cObj, HR = 1, driftHR = 1.2, nsim = 2) #> The sample size for internal control, internal treatment, and external control arms are 140, 275, and 100, respectively. #> Error in paste0(\"Set seed to \", .Random.seed[1]): object '.Random.seed' not found  # match on covariates 1 and 2 match_cov(dt = sample_cov, match = c(\"cov1\", \"cov2\")) #> Error in is.data.frame(x): object 'sample_cov' not found  # match on all 3 covariates match_cov(dt = sample_cov, match = c(\"cov1\", \"cov2\", \"cov3\")) #> Error in is.data.frame(x): object 'sample_cov' not found"},{"path":"/reference/plot_bias.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot bias — plot_bias","title":"Plot bias — plot_bias","text":"Plot bias","code":""},{"path":"/reference/plot_bias.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot bias — plot_bias","text":"","code":"plot_bias(dt, HR = 1, driftHR = 1, pred = \"none\")"},{"path":"/reference/plot_bias.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot bias — plot_bias","text":"dt data.frame containing summary statistics posterior samples simulation generated get_summary HR pre-specified HR treatment control arm internal trial driftHR pre-specified HR external control arm internal control arm pred predictors use fitting exponential distribution MCMC","code":""},{"path":"/reference/plot_bias.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot bias — plot_bias","text":"ggplot bar plot containing bias implications corresponding prior, pre-specified HR internal treatment control arms 1","code":""},{"path":"/reference/plot_hr.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot posterior hazard ratio between treatment and control — plot_hr","title":"Plot posterior hazard ratio between treatment and control — plot_hr","text":"Plot posterior hazard ratio treatment control","code":""},{"path":"/reference/plot_hr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot posterior hazard ratio between treatment and control — plot_hr","text":"","code":"plot_hr(dt, HR = 0.67, driftHR = 1, pred = \"none\")"},{"path":"/reference/plot_hr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot posterior hazard ratio between treatment and control — plot_hr","text":"dt data.frame containing summary statistics posterior samples simulation generated get_summary HR pre-specified HR treatment control arm internal trial driftHR pre-specified HR external control arm internal control arm pred predictors use fitting exponential distribution MCMC","code":""},{"path":"/reference/plot_hr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot posterior hazard ratio between treatment and control — plot_hr","text":"ggplot point plot containing posterior hazard ratio treatment control arms corresponding prior","code":""},{"path":"/reference/plot_mse.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot MSE — plot_mse","title":"Plot MSE — plot_mse","text":"Plot MSE","code":""},{"path":"/reference/plot_mse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot MSE — plot_mse","text":"","code":"plot_mse(dt, HR = 1, driftHR = 1, pred = \"none\")"},{"path":"/reference/plot_mse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot MSE — plot_mse","text":"dt data.frame containing summary statistics posterior samples simulation generated get_summary HR pre-specified HR treatment control arm internal trial driftHR pre-specified HR external control arm internal control arm pred predictors use fitting exponential distribution MCMC","code":""},{"path":"/reference/plot_mse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot MSE — plot_mse","text":"ggplot bar plot containing MSE implications corresponding prior, pre-specified HR internal treatment control arms 1","code":""},{"path":"/reference/plot_power.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot power — plot_power","title":"Plot power — plot_power","text":"Plot power","code":""},{"path":"/reference/plot_power.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot power — plot_power","text":"","code":"plot_power(dt, HR = 0.67, driftHR = 1, pred = \"none\")"},{"path":"/reference/plot_power.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot power — plot_power","text":"dt data.frame containing summary statistics posterior samples simulation generated get_summary HR pre-specified HR treatment control arm internal trial driftHR pre-specified HR external control arm internal control arm pred predictors use fitting exponential distribution MCMC","code":""},{"path":"/reference/plot_power.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot power — plot_power","text":"ggplot bar plot containing power implications corresponding prior","code":""},{"path":"/reference/plot_type1error.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot type 1 error — plot_type1error","title":"Plot type 1 error — plot_type1error","text":"Plot type 1 error proportions prior distribution using simulations true HR internal treatment control arms 1.0.","code":""},{"path":"/reference/plot_type1error.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot type 1 error — plot_type1error","text":"","code":"plot_type1error(dt, driftHR = 1, pred = \"none\")"},{"path":"/reference/plot_type1error.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot type 1 error — plot_type1error","text":"dt data.frame containing summary statistics posterior samples simulation generated get_summary(). Must contain simulations HR = 1.0. driftHR driftHR external internal control arms type 1 error plotted. Must within unique(dt$driftHR). pred predictors used fitting exponential distribution MCMC type 1 error plotted. Must within unique(dt$pred).","code":""},{"path":"/reference/plot_type1error.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot type 1 error — plot_type1error","text":"bar plot class ggplot containing type 1 error proportions prior distribution.","code":""},{"path":"/reference/ps_message.html","id":null,"dir":"Reference","previous_headings":"","what":"Conditional Message — ps_message","title":"Conditional Message — ps_message","text":"Simple wrapper function around message() supress printing messages option psborrow.quiet set TRUE .e.","code":"options(\"psborrow.quiet\" = TRUE)"},{"path":"/reference/ps_message.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Conditional Message — ps_message","text":"","code":"ps_message(...)"},{"path":"/reference/ps_message.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Conditional Message — ps_message","text":"... Values passed onto message()","code":""},{"path":"/reference/rej_est.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate summary statistics for the MCMC chains — rej_est","title":"Generate summary statistics for the MCMC chains — rej_est","text":"Generate summary statistics MCMC chains","code":""},{"path":"/reference/rej_est.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate summary statistics for the MCMC chains — rej_est","text":"","code":"rej_est(samples)"},{"path":"/reference/rej_est.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate summary statistics for the MCMC chains — rej_est","text":"samples object class mcmc.list","code":""},{"path":"/reference/rej_est.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate summary statistics for the MCMC chains — rej_est","text":"vector containing mean, median, sd, reject rate MCMC chains","code":""},{"path":"/reference/run_mcmc.html","id":null,"dir":"Reference","previous_headings":"","what":"Run MCMC for multiple scenarios with provided data — run_mcmc","title":"Run MCMC for multiple scenarios with provided data — run_mcmc","text":"Run MCMC multiple scenarios provided data","code":""},{"path":"/reference/run_mcmc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run MCMC for multiple scenarios with provided data — run_mcmc","text":"","code":"run_mcmc(dt, priorObj, n.chains, n.adapt, n.burn, n.iter, seed, path)"},{"path":"/reference/run_mcmc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run MCMC for multiple scenarios with provided data — run_mcmc","text":"dt list matrix containing simulated time--events information priorObj object class .priorClass generated set_prior n.chains number parallel chains model n.adapt number iterations adaptation n.burn number iterations discarded burn-n.iter number iterations monitor seed seed random number generator. Default first element .Random.seed path file name saving output including folder path","code":""},{"path":"/reference/run_mcmc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run MCMC for multiple scenarios with provided data — run_mcmc","text":"data.frame containing summary statistics posterior distribution simulation","code":""},{"path":"/reference/run_mcmc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run MCMC for multiple scenarios with provided data — run_mcmc","text":"","code":"# examples in vignette"},{"path":"/reference/run_mcmc_p.html","id":null,"dir":"Reference","previous_headings":"","what":"Run MCMC for multiple scenarios with provided data with parallel processing — run_mcmc_p","title":"Run MCMC for multiple scenarios with provided data with parallel processing — run_mcmc_p","text":"Run MCMC multiple scenarios provided data parallel processing","code":""},{"path":"/reference/run_mcmc_p.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run MCMC for multiple scenarios with provided data with parallel processing — run_mcmc_p","text":"","code":"run_mcmc_p(   dt,   priorObj,   n.chains,   n.adapt,   n.burn,   n.iter,   seed,   path,   n.cores = 2 )"},{"path":"/reference/run_mcmc_p.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run MCMC for multiple scenarios with provided data with parallel processing — run_mcmc_p","text":"dt list matrix containing simulated time--events information priorObj object class .priorClass generated set_prior n.chains number parallel chains model n.adapt number iterations adaptation n.burn number iterations discarded burn-n.iter number iterations monitor seed seed random number generator. Default first element .Random.seed path file name saving output including folder path n.cores number processes parallelize (default = 2)","code":""},{"path":"/reference/run_mcmc_p.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run MCMC for multiple scenarios with provided data with parallel processing — run_mcmc_p","text":"data.frame containing summary statistics posterior distribution simulation","code":""},{"path":"/reference/run_mcmc_p.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run MCMC for multiple scenarios with provided data with parallel processing — run_mcmc_p","text":"","code":"# similar to run_mcmc"},{"path":"/reference/save_png.html","id":null,"dir":"Reference","previous_headings":"","what":"Save .png file (for snapshot testing purposes) — save_png","title":"Save .png file (for snapshot testing purposes) — save_png","text":"Save .png file (snapshot testing purposes)","code":""},{"path":"/reference/save_png.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save .png file (for snapshot testing purposes) — save_png","text":"","code":"save_png(plot, width = 1200, height = 800)"},{"path":"/reference/save_png.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save .png file (for snapshot testing purposes) — save_png","text":"plot plot printed width pixels height pixels","code":""},{"path":"/reference/save_png.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save .png file (for snapshot testing purposes) — save_png","text":"temp path image","code":""},{"path":"/reference/set_clin.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify parameters for enrollment time, drop-out pattern and analysis start time — set_clin","title":"Specify parameters for enrollment time, drop-out pattern and analysis start time — set_clin","text":"function allows user specify enrollment drop-rate, type clinical cut-Date. enrollment times drop-times follow piece-wise exponential distribution.","code":""},{"path":"/reference/set_clin.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify parameters for enrollment time, drop-out pattern and analysis start time — set_clin","text":"","code":"set_clin(gamma, e_itv, CCOD, CCOD_t, etaC, etaE, d_itv)"},{"path":"/reference/set_clin.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify parameters for enrollment time, drop-out pattern and analysis start time — set_clin","text":"gamma vector rate enrollment per unit time e_itv vector duration time periods recruitment rates specified gamma. Note length e_itv length gamma 1 less. CCOD Type analysis start time. Analysis starts CCOD_t months first last patient's enrollment CCOD = \"fixed-first\" CCOD = \"fixed-last\" respectively. Analysis starts CCOD_t events observed CCOD = \"event\" CCOD_t Time difference analysis start first patient's enrollment CCOD = \"fixed-first\". Time difference analysis start last patient's enrollment CCOD = \"fixed-last\". Number events observed analysis starts CCOD = \"event\". Patients enrolled analysis start time excluded analysis etaC vector dropout rate per unit time control arm etaE vector dropout rate per unit time experimental arm. left NULL, uses dropout rate eta. d_itv vector duration time periods dropping study rates specified etaC etaE. Note length d_itv length etaC 1 less.","code":""},{"path":"/reference/set_clin.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify parameters for enrollment time, drop-out pattern and analysis start time — set_clin","text":".clinClass class containing information enrollment time, drop-pattern analysis start time","code":""},{"path":"/reference/set_clin.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Specify parameters for enrollment time, drop-out pattern and analysis start time — set_clin","text":"","code":"# set the operational parameter values for the trial # analysis starts at64 time units after first patient in set_clin(gamma = 10, e_itv = 4, etaC = 0.003,  CCOD = \"fixed-first\", CCOD_t = 64) #> Dropout rate per unit time for treatment arm (etaE) is not specified correcly. Disregard this warning if this is for external trial. Otherwise the same dropout rate as eta is used. #> An object of class \".clinClass\" #> Slot \"gamma\": #> [1] 10 #>  #> Slot \"e_itv\": #> [1] 4 #>  #> Slot \"CCOD\": #> [1] \"fixed-first\" #>  #> Slot \"CCOD_t\": #> [1] 64 #>  #> Slot \"etaC\": #> [1] 0.003 #>  #> Slot \"etaE\": #> [1] 0.003 #>  #> Slot \"d_itv\": #> NULL #>   # analysis starts at 12 time units after last patient in set_clin(gamma = 2, e_itv = 18, etaC = 0.005,  CCOD = \"fixed-last\", CCOD_t = 12) #> Dropout rate per unit time for treatment arm (etaE) is not specified correcly. Disregard this warning if this is for external trial. Otherwise the same dropout rate as eta is used. #> An object of class \".clinClass\" #> Slot \"gamma\": #> [1] 2 #>  #> Slot \"e_itv\": #> [1] 18 #>  #> Slot \"CCOD\": #> [1] \"fixed-last\" #>  #> Slot \"CCOD_t\": #> [1] 12 #>  #> Slot \"etaC\": #> [1] 0.005 #>  #> Slot \"etaE\": #> [1] 0.005 #>  #> Slot \"d_itv\": #> NULL #>"},{"path":"/reference/set_cov.html","id":null,"dir":"Reference","previous_headings":"","what":"Set up covariates — set_cov","title":"Set up covariates — set_cov","text":"function saves mean, variance covariance among covariates. technical details, see vignette.","code":""},{"path":"/reference/set_cov.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set up covariates — set_cov","text":"","code":"set_cov(n_cat, n_cont, mu_int, mu_ext, var, cov, prob_int, prob_ext)"},{"path":"/reference/set_cov.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set up covariates — set_cov","text":"n_cat Number binary variable. See details n_cont Number continuous variable mu_int Mean covariates internal trial. covariates simulated multivariate normal distribution. left NULL, uses default value 0 covariates. provided one value, value used covariates mu_ext Mean covariates external trial. left NULL, uses mean mu_int var Variance covariates. left NULL, uses default value 0 covariates. provided one value, uses value covariates cov Covariance pair covariates. Covariance needs provided certain order users encouraged read example provided vignette. left NULL, uses default value 0 covariates. provided one value, uses value every pair covariates prob_int Probability binary covariate equalling 1 internal trial. left NULL, uses default value 0.5 covariates. provided one value, uses value covariates prob_ext Probability binary covariate equalling 1 external trial. left NULL, uses probability prob_int","code":""},{"path":"/reference/set_cov.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set up covariates — set_cov","text":".covClass class containing covariate information","code":""},{"path":"/reference/set_cov.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Set up covariates — set_cov","text":"Categorical variables created sampling continuous variable multivariate normal distribution (thus respecting correlation covariates specified cov) applying cut point derived prob_int prob_ext quantile said distribution .e. univariate variable derived : Please note means value mu_int & mu_ext impact categorical covariates thus can set value. example process works assume n_cat=3 n_cont=2. First 5 variables sampled multivariate normal distribution specified mu_int/mu_ext, var & cov. , first 3 variables converted binary based probabilities specified prob_int prob_ext. means 2 continuous variables take mean sd last 2 entries vectors mu_int/mu_ext var.","code":"binvar <- as.numeric(rnorm(n, mu, sqrt(var)) < qnorm(prob, mu, sqrt(var)))"},{"path":"/reference/set_event.html","id":null,"dir":"Reference","previous_headings":"","what":"Set up time-to-events — set_event","title":"Set up time-to-events — set_event","text":"Set time--events","code":""},{"path":"/reference/set_event.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set up time-to-events — set_event","text":"","code":"set_event(event, lambdaC, beta, shape, t_itv, change, keep)"},{"path":"/reference/set_event.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set up time-to-events — set_event","text":"event Distribution time--events: event = \"pwexp\" piece-wise exponential distribution. event = \"weibull\" weibull distribution lambdaC Baseline hazard rate internal control arm. Specify vector piece-wise hazard duration specified t_itv event = \"pwexp\" beta covariates' coefficients. NULL covariates found ssObj shape shape weibull distribution event = \"weibull\". NULL event = \"pwexp\" t_itv vector indicating interval lengths exponential rates provided lambdaC apply. Note length t_itv least 1 less lambdaC final value rate lambdaC applies time sum(t_itv). NULL event = \"weibull\" change operations applied covariates simulating time--events keep original covariates keep simulate time--events","code":""},{"path":"/reference/set_event.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set up time-to-events — set_event","text":".eventClass class containing time--events information matrix containing simulated time--events information","code":""},{"path":"/reference/set_event.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set up time-to-events — set_event","text":"","code":"# time-to-event follows a weibull distribution set_event(event = \"weibull\", shape = 0.9, lambdaC = 0.0135) #> An object of class \".eventClass\" #> Slot \"event\": #> [1] \"weibull\" #>  #> Slot \"lambdaC\": #> [1] 0.0135 #>  #> Slot \"shape\": #> [1] 0.9 #>  #> Slot \"t_itv\": #> NULL #>  #> Slot \"beta\": #> NULL #>  #> Slot \"change\": #> NULL #>  #> Slot \"keep\": #> NULL #>   # time-to-event follows a piece-wise exponential distribution set_event(event = \"pwexp\", t_itv = 1, lambdaC = c(0.1, 0.02)) #> An object of class \".eventClass\" #> Slot \"event\": #> [1] \"pwexp\" #>  #> Slot \"lambdaC\": #> [1] 0.10 0.02 #>  #> Slot \"shape\": #> NULL #>  #> Slot \"t_itv\": #> [1] 1 #>  #> Slot \"beta\": #> NULL #>  #> Slot \"change\": #> NULL #>  #> Slot \"keep\": #> NULL #>"},{"path":"/reference/set_n.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate external trial indicator and treatment arm indicator — set_n","title":"Simulate external trial indicator and treatment arm indicator — set_n","text":"function conducts validity check generates matrix two binary variables indicating observation belongs external trial observation belongs treatment arm.","code":""},{"path":"/reference/set_n.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate external trial indicator and treatment arm indicator — set_n","text":"","code":"set_n(ssC, ssE, ssExt)"},{"path":"/reference/set_n.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate external trial indicator and treatment arm indicator — set_n","text":"ssC Number observations internal control arm. Default 100 ssE Number observations internal experiment arm. Default number observations ssC ssExt Number observations external control arm. Default number observations ssC","code":""},{"path":"/reference/set_n.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate external trial indicator and treatment arm indicator — set_n","text":"matrix containing external trial indicator treatment indicator","code":""},{"path":"/reference/set_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify prior distributions and predictors for MCMC methods — set_prior","title":"Specify prior distributions and predictors for MCMC methods — set_prior","text":"Specify prior distributions predictors MCMC methods","code":""},{"path":"/reference/set_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify prior distributions and predictors for MCMC methods — set_prior","text":"","code":"set_prior(pred, prior, r0, alpha, sigma)"},{"path":"/reference/set_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify prior distributions and predictors for MCMC methods — set_prior","text":"pred Predictors include weibull distribution. covariates except treatment indicator included pred = NULL. propensity score generated using logistic regression model covariates treatment indicator included pred = ps. covariates treatment indicator included pred = prior Prior distribution precision parameter controls degree borrowing. Half-cauchy distribution prior = \"cauchy\". external data included data prior = \"no_ext\". External control arm assumed baseline hazards internal control arm prior = \"full_ext\". options include \"gamma\" \"unif\" r0 Initial values shape weibull distribution time--events alpha Initial values log baseline hazard rate external internal control arms. Length alpha 1 prior = \"full_ext\" prior = \"no_ext\", equal 2 otherwise sigma Initial values precision parameter prior = \"cauchy\". left NULL, default value 0.03 used","code":""},{"path":"/reference/set_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify prior distributions and predictors for MCMC methods — set_prior","text":".priorClass class containing survival data prior information","code":""},{"path":"/reference/set_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Specify prior distributions and predictors for MCMC methods — set_prior","text":"","code":"# hierachical Bayesian model with precision parameter follows a half-cauchy distribution set_prior(pred = \"none\", prior = \"cauchy\", r0 = 1, alpha = c(0, 0), sigma = 0.03) #> An object of class \".priorClass\" #> Slot \"pred\": #> [1] \"none\" #>  #> Slot \"prior\": #> [1] \"cauchy\" #>  #> Slot \"r0\": #> [1] 1 #>  #> Slot \"alpha\": #> [1] 0 0 #>  #> Slot \"sigma\": #> [1] 0.03 #>   # hierachical Bayesian model with precision parameter follows a gamma distribution set_prior(pred = \"none\", prior = \"gamma\", r0 = 1, alpha = c(0, 0)) #> An object of class \".priorClass\" #> Slot \"pred\": #> [1] \"none\" #>  #> Slot \"prior\": #> [1] \"gamma\" #>  #> Slot \"r0\": #> [1] 1 #>  #> Slot \"alpha\": #> [1] 0 0 #>  #> Slot \"sigma\": #> NULL #>   # conventional Bayesian model to not borrow from external control arm set_prior(pred = \"none\", prior = \"no_ext\", alpha = 0) #> No initial values for the shape of the weibull distribution (r0) is detected. Default value 1 is used #> An object of class \".priorClass\" #> Slot \"pred\": #> [1] \"none\" #>  #> Slot \"prior\": #> [1] \"no_ext\" #>  #> Slot \"r0\": #> [1] 1 #>  #> Slot \"alpha\": #> [1] 0 #>  #> Slot \"sigma\": #> NULL #>   # conventional Bayesian model to fully borrow from external control arm set_prior(pred = \"none\", prior = \"full_ext\", alpha = 0) #> No initial values for the shape of the weibull distribution (r0) is detected. Default value 1 is used #> An object of class \".priorClass\" #> Slot \"pred\": #> [1] \"none\" #>  #> Slot \"prior\": #> [1] \"full_ext\" #>  #> Slot \"r0\": #> [1] 1 #>  #> Slot \"alpha\": #> [1] 0 #>  #> Slot \"sigma\": #> NULL #>"},{"path":"/reference/simu_cov.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate covariates — simu_cov","title":"Simulate covariates — simu_cov","text":"function generates continuous binary covariates simulating multivariate normal distribution. Outcomes converted binary variables using quantiles normal distribution calculated probability provided. covariates added external trial treatment arm indicators.","code":""},{"path":"/reference/simu_cov.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate covariates — simu_cov","text":"","code":"simu_cov(ssObj, covObj, driftHR, HR, nsim, seed, path)"},{"path":"/reference/simu_cov.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate covariates — simu_cov","text":"ssObj object class .covClass generated set_n covObj object class .covClass generated set_cov driftHR hazard ratio external control internal control arms HR list hazard ratio treatment control arms nsim number simulation. Default 5 seed seed R‘s random number generator. Default first element .Random.seed path file name saving output including folder path","code":""},{"path":"/reference/simu_cov.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate covariates — simu_cov","text":"list matrix containing simulated covariates information","code":""},{"path":"/reference/simu_cov.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulate covariates — simu_cov","text":"","code":"# simulate patient-level data with 1 continuous covariate sample = set_n(ssC = 10, ssE = 20, ssExt = 40) cov1 = set_cov(n_cat = 0, n_cont = 1, mu_int = 0, mu_ext = 0, var = 1) simu_cov(ssObj = sample, covObj = cov1, HR = 0.5, driftHR = 1, nsim = 2) #> The sample size for internal control, internal treatment, and external control arms are 10, 20, and 40, respectively. #> Error in paste0(\"Set seed to \", .Random.seed[1]): object '.Random.seed' not found  # simulate patient-level data with 1 binary and 2 continuous covariate cov2 = set_cov(n_cat = 1, n_cont = 2, mu_int = 0, mu_ext = 0, var = 1,                cov = 0.3, prob_int = 0.2, prob_ext = 0.3) #> User provides one mean of covariate in internal trials. This value is used for all covariates #> User provides one mean of covariate in external trials. This value is used for all covariates #> User provides one number for variance. This variance is used for all covariates #> User provides one number: 0.3 for covariance. This covariance is used for all covariates simu_cov(ssObj = sample, covObj = cov2, HR = 0.5, driftHR = 1, nsim = 2) #> The sample size for internal control, internal treatment, and external control arms are 10, 20, and 40, respectively. #> Error in paste0(\"Set seed to \", .Random.seed[1]): object '.Random.seed' not found"},{"path":"/reference/simu_time.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate time-to-events for multiple scenarios — simu_time","title":"Simulate time-to-events for multiple scenarios — simu_time","text":"Simulate time--events multiple scenarios","code":""},{"path":"/reference/simu_time.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate time-to-events for multiple scenarios — simu_time","text":"","code":"simu_time(dt, eventObj, clinInt, clinExt, seed, path)"},{"path":"/reference/simu_time.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate time-to-events for multiple scenarios — simu_time","text":"dt list matrix generated simu_cov containing simulated covariates information eventObj object class .eventClass generated set_event including event information clinInt object class .clinClass generated set_clin including internal trial information clinExt object class .clinClass generated set_clin including external trial information seed seed R‘s random number generator. Default first element .Random.seed path file name saving output including folder path","code":""},{"path":"/reference/simu_time.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate time-to-events for multiple scenarios — simu_time","text":"list matrix containing simulated time--events information","code":""},{"path":"/reference/simu_time.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulate time-to-events for multiple scenarios — simu_time","text":"","code":"# simulate patient-level data without covariates # simulate survival time following weibull distribution  # simulate trial indicator and set hazard ratios sample = set_n(ssC = 10, ssE = 20, ssExt = 40) sample_hr <- simu_cov(ssObj = sample, HR = 1, driftHR=c(1,1.2), nsim = 10) #> No covObj is provided. #> The sample size for internal control, internal treatment, and external control arms are 10, 20, and 40, respectively. #> Error in paste0(\"Set seed to \", .Random.seed[1]): object '.Random.seed' not found  # enrollment pattern, drop-out, analysis start time c_int = set_clin(gamma = 2, e_itv = 10, etaC = 0.5,  CCOD = \"fixed-first\", CCOD_t = 64) #> Dropout rate per unit time for treatment arm (etaE) is not specified correcly. Disregard this warning if this is for external trial. Otherwise the same dropout rate as eta is used. c_ext = c_int  # simulate time-to-event with a weibull distribution evt1 <- set_event(event = \"weibull\", shape = 0.8, lambdaC = 0.01) simu_time(dt = sample_hr, eventObj = evt1, clinInt = c_int, clinExt = c_ext) #> Error in message(...): object '.Random.seed' not found  # simulate time-to-event with an exponential distribution evt2 <- set_event(event = \"pwexp\", t_itv = 1, lambdaC = c(0.1, 0.02)) simu_time(dt = sample_hr, eventObj = evt2, clinInt = c_int, clinExt = c_int) #> Error in message(...): object '.Random.seed' not found"},{"path":"/reference/valid_mcmc.html","id":null,"dir":"Reference","previous_headings":"","what":"validate the operational parameters for MCMC method — valid_mcmc","title":"validate the operational parameters for MCMC method — valid_mcmc","text":"validate operational parameters MCMC method","code":""},{"path":"/reference/valid_mcmc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"validate the operational parameters for MCMC method — valid_mcmc","text":"","code":"valid_mcmc(n.chains, n.adapt, n.burn, n.iter)"},{"path":"/reference/valid_mcmc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"validate the operational parameters for MCMC method — valid_mcmc","text":"n.chains number parallel chains model n.adapt number iterations adaptation n.burn number iterations discarded burn-n.iter number iterations monitor","code":""},{"path":"/reference/valid_mcmc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"validate the operational parameters for MCMC method — valid_mcmc","text":"list containing numbers parallel chains iterations","code":""}]
