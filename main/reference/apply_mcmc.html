<!DOCTYPE html>
<!-- Generated by pkgdown + https://github.com/insightsengineering/r-pkgdown-multiversion -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Fit Dynamic Borrowing MCMC Model — apply_mcmc • psborrow</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fit Dynamic Borrowing MCMC Model — apply_mcmc">
<meta name="description" content="Fit a dynamic borrowing Weibull survival model to the given dataset and extract the posterior
samples using MCMC.
See the user guide for more information on the model formulation.
See run_mcmc() for more information on the available parameters for tuning the MCMC sampling
process">
<meta property="og:description" content="Fit a dynamic borrowing Weibull survival model to the given dataset and extract the posterior
samples using MCMC.
See the user guide for more information on the model formulation.
See run_mcmc() for more information on the available parameters for tuning the MCMC sampling
process">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">psborrow</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Analysis.html">Analysing data with psborrow</a></li>
    <li><a class="dropdown-item" href="../articles/user_guide.html">User Guide: Dynamic Borrowing with psborrow</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      <div><li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-versions">Versions</a>
    <div class="dropdown-menu" aria-labelledby="dropdown-versions">
    <a class="dropdown-item" data-toggle="tooltip" title="" href="https://Genentech.github.io/psborrow/main">main</a>
</div>
</li></div>
</ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Fit Dynamic Borrowing MCMC Model</h1>

      <div class="d-none name"><code>apply_mcmc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Fit a dynamic borrowing Weibull survival model to the given dataset and extract the posterior
samples using MCMC.
See the user guide for more information on the model formulation.
See <code><a href="run_mcmc.html">run_mcmc()</a></code> for more information on the available parameters for tuning the MCMC sampling
process</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a>
</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">apply_mcmc</span><span class="op">(</span><span class="va">dt</span>, <span class="va">formula_cov</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">extract_samples</span><span class="op">(</span><span class="va">object</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'apply_mcmc'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a>
</h2>


<dl>
<dt id="arg-dt">dt<a class="anchor" aria-label="anchor" href="#arg-dt"></a>
</dt>
<dd><p>A data.frame containing data required for modelling. See details</p></dd>


<dt id="arg-formula-cov">formula_cov<a class="anchor" aria-label="anchor" href="#arg-formula-cov"></a>
</dt>
<dd><p>A one sided formula specifying which non-treatment covariates should
be included into the model. See details</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a>
</dt>
<dd><p>Additional arguments passed onto <code><a href="run_mcmc.html">run_mcmc()</a></code>. Only exception being the
<code>path</code> argument which is not supported by this function</p></dd>


<dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a>
</dt>
<dd><p>A <code>apply_mcmc</code> object created by <code>apply_mcmc()</code></p></dd>

</dl>
</div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a>
</h2>

<div class="section">
<h3 id="apply-mcmc-">
<code>apply_mcmc()</code><a class="anchor" aria-label="anchor" href="#apply-mcmc-"></a>
</h3>


<p>The <code>dt</code> data.frame must contain 1 row per subject with the following variables:</p>
<ul>
<li><p><strong>time</strong> - A continuous non-zero number specifying the time that the subject had an event at</p></li>
<li><p><strong>cnsr</strong> - A column of 0/1's where 1 indicates that the event was censored/right truncated</p></li>
<li><p><strong>ext</strong> - A column of 0/1's where 1 indicates that the subject was part of the external
control</p></li>
<li><p><strong>trt</strong> - A column of 0/1's where 1 indicates that the subject was receiving the experimental
treatment</p></li>
</ul>
<p>The <code>dt</code> data.frame may also contain any additional covariates to be used in the Weibull model
as specified by <code>formula_cov</code>. In order to fit a valid model <code>formula_cov</code> must contain
the intercept term. The formula will be automatically adjusted to include the treatment term
and as such should not be included here, if you want to include a treatment interaction term
this should be done by using <code>~ trt:covariate</code> and NOT via <code>~ trt*covariate</code>.</p>
</div>

<div class="section">
<h3 id="extract-samples-">
<code>extract_samples()</code><a class="anchor" aria-label="anchor" href="#extract-samples-"></a>
</h3>


<p>This function can be used to extract the samples generated by <code>apply_mcmc()</code></p>
</div>

<div class="section">
<h3 id="summary-">
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code><a class="anchor" aria-label="anchor" href="#summary-"></a>
</h3>


<p>This function provides summary statistics about the samples generated by <code>apply_mcmc()</code></p>
</div>

<div class="section">
<h3 id="extracted-samples">Extracted Samples<a class="anchor" aria-label="anchor" href="#extracted-samples"></a>
</h3>


<p>The extracted samples can be roughly defined as follows (see the user guide for full details):</p>
<ul>
<li><p><strong><code>HR_cc_hc</code></strong> - The hazard ratio between the concurrent control arm and the historical
control arm. This can be
be thought of as the ratio of the scale parameter between the baseline trial distribution and
the baseline
external control distribution. This is equivalent to <code>exp(alpha[2] - alpha[1])</code></p></li>
<li><p><strong><code>HR_trt_cc</code></strong> - The hazard ratio between the treatment arm and the concurrent control arm.
This is equivalent
to <code>exp(beta_trt)</code></p></li>
<li><p><strong><code>alpha[1]</code></strong> - The shape parameter for the trial's baseline distribution</p></li>
<li><p><strong><code>alpha[2]</code></strong> - The shape parameter for the historical control's baseline distribution</p></li>
<li><p><strong><code>beta_trt</code></strong> - The log-hazard ratio for the treatment effect. This is equivalent to
<code>log(HR_trt_cc)</code></p></li>
<li><p><strong><code>beta_&lt;var&gt;</code></strong> - The log-hazard ratio for any other covariate provided to the model via
<code>formula_cov</code></p></li>
<li><p><strong><code>r0</code></strong> - The scale parameter for the baseline distribution of both the trial and the
historical control</p></li>
<li><p><strong><code>tau/sigma</code></strong> - The precision/variance for <code>alpha[1]</code> i.e. controls how much
information is borrowed from the
historical control arm</p></li>
</ul>
</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Isaac Gravestock, Craig Gower-Page, Yichen Lu, Aijing Lin, F. Hoffmann-La Roche AG.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
