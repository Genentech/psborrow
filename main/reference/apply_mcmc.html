<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Fit a dynamic borrowing Weibull survival model to the given dataset and extract the posterior
samples using MCMC.
See the user guide for more information on the model formulation.
See run_mcmc() for more information on the available parameters for tuning the MCMC sampling
process"><title>Fit Dynamic Borrowing MCMC Model — apply_mcmc • psborrow</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fit Dynamic Borrowing MCMC Model — apply_mcmc"><meta property="og:description" content="Fit a dynamic borrowing Weibull survival model to the given dataset and extract the posterior
samples using MCMC.
See the user guide for more information on the model formulation.
See run_mcmc() for more information on the available parameters for tuning the MCMC sampling
process"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">psborrow</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Analysis.html">Analysing data with psborrow</a>
    <a class="dropdown-item" href="../articles/user_guide.html">User Guide: Dynamic Borrowing with psborrow</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Fit Dynamic Borrowing MCMC Model</h1>
      
      <div class="d-none name"><code>apply_mcmc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Fit a dynamic borrowing Weibull survival model to the given dataset and extract the posterior
samples using MCMC.
See the user guide for more information on the model formulation.
See <code><a href="run_mcmc.html">run_mcmc()</a></code> for more information on the available parameters for tuning the MCMC sampling
process</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">apply_mcmc</span><span class="op">(</span><span class="va">dt</span>, <span class="va">formula_cov</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">extract_samples</span><span class="op">(</span><span class="va">object</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for apply_mcmc</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dt</dt>
<dd><p>A data.frame containing data required for modelling. See details</p></dd>


<dt>formula_cov</dt>
<dd><p>A one sided formula specifying which non-treatment covariates should
be included into the model. See details</p></dd>


<dt>...</dt>
<dd><p>Additional arguments passed onto <code><a href="run_mcmc.html">run_mcmc()</a></code>. Only exception being the
<code>path</code> argument which is not supported by this function</p></dd>


<dt>object</dt>
<dd><p>A <code>apply_mcmc</code> object created by <code>apply_mcmc()</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    
<div class="section">
<h3 id="apply-mcmc-"><code>apply_mcmc()</code><a class="anchor" aria-label="anchor" href="#apply-mcmc-"></a></h3>


<p>The <code>dt</code> data.frame must contain 1 row per subject with the following variables:</p><ul><li><p><strong>time</strong> - A continuous non-zero number specifying the time that the subject had an event at</p></li>
<li><p><strong>cnsr</strong> - A column of 0/1's where 1 indicates that the event was censored/right truncated</p></li>
<li><p><strong>ext</strong> - A column of 0/1's where 1 indicates that the subject was part of the external
control</p></li>
<li><p><strong>trt</strong> - A column of 0/1's where 1 indicates that the subject was receiving the experimental
treatment</p></li>
</ul><p>The <code>dt</code> data.frame may also contain any additional covariates to be used in the Weibull model
as specified by <code>formula_cov</code>. In order to fit a valid model <code>formula_cov</code> must contain
the intercept term. The formula will be automatically adjusted to include the treatment term
and as such should not be included here, if you want to include a treatment interaction term
this should be done by using <code>~ trt:covariate</code> and NOT via <code>~ trt*covariate</code>.</p>
</div>

<div class="section">
<h3 id="extract-samples-"><code>extract_samples()</code><a class="anchor" aria-label="anchor" href="#extract-samples-"></a></h3>


<p>This function can be used to extract the samples generated by <code>apply_mcmc()</code></p>
</div>

<div class="section">
<h3 id="summary-"><code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code><a class="anchor" aria-label="anchor" href="#summary-"></a></h3>


<p>This function provides summary statistics about the samples generated by <code>apply_mcmc()</code></p>
</div>

<div class="section">
<h3 id="extracted-samples">Extracted Samples<a class="anchor" aria-label="anchor" href="#extracted-samples"></a></h3>


<p>The extracted samples can be roughly defined as follows (see the user guide for full details):</p><ul><li><p><strong><code>HR_cc_hc</code></strong> - The hazard ratio between the concurrent control arm and the historical
control arm. This can be
be thought of as the ratio of the scale parameter between the baseline trial distribution and
the baseline
external control distribution. This is equivalent to <code>exp(alpha[2] - alpha[1])</code></p></li>
<li><p><strong><code>HR_trt_cc</code></strong> - The hazard ratio between the treatment arm and the concurrent control arm.
This is equivalent
to <code>exp(beta_trt)</code></p></li>
<li><p><strong><code>alpha[1]</code></strong> - The shape parameter for the trial's baseline distribution</p></li>
<li><p><strong><code>alpha[2]</code></strong> - The shape parameter for the historical control's baseline distribution</p></li>
<li><p><strong><code>beta_trt</code></strong> - The log-hazard ratio for the treatment effect. This is equivalent to
<code>log(HR_trt_cc)</code></p></li>
<li><p><strong><code>beta_&lt;var&gt;</code></strong> - The log-hazard ratio for any other covariate provided to the model via
<code>formula_cov</code></p></li>
<li><p><strong><code>r0</code></strong> - The scale parameter for the baseline distribution of both the trial and the
historical control</p></li>
<li><p><strong><code>tau/sigma</code></strong> - The precision/variance for <code>alpha[1]</code> i.e. controls how much
information is borrowed from the
historical control arm</p></li>
</ul></div>

    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Isaac Gravestock, Craig Gower-Page, Yichen Lu, Aijing Lin, F. Hoffmann-La Roche AG.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

